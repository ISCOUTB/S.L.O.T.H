$schema: https://moonrepo.dev/schemas/project.json

project:
    name: autoscaler
    description: AutoScaler utility for deployment

toolchain:
    python:
        version: "3.13.7"

tasks:
    uv:
        command: uv
        toolchain: python
        local: true

    run:
        command: uv
        args:
            - run
            - -m
            - src.main
        env:
            PYTHONPATH: .
        toolchain: python
        options:
            runFromWorkspaceRoot: false

    docker-build:
        command: docker
        args:
            - build
            - -t
            - autoscaler:latest
            - -f
            - Dockerfile
            - .
        options:
            runFromWorkspaceRoot: false
            cache: false
