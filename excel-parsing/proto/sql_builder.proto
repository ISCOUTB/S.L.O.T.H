syntax = "proto3";
import "ddl_generator.proto";

package sql_builder;

service SQLBuilder {
    rpc BuildSQL(BuildSQLRequest) returns (BuildSQLResponse);
}

message BuildSQLRequest {
    message ColumnInfo {
        string type = 1; // Data type of the column (e.g., "INTEGER", "TEXT")
        string extra = 2; // Additional SQL constraints (e.g., "NOT NULL", "PRIMARY KEY")
    }

    map<string, ddl_generator.DDLResponse> cols = 1;
    map<string, ColumnInfo> dtypes = 2;
    string table_name = 3;
}

message BuildSQLResponse {
    message Sentence {
        repeated string sql = 1;
    }

    map<int32, Sentence> content = 1;
    optional string error = 2;
}
